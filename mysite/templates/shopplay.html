<html>
	<head>
		<title>商品展示</title>
	</head>
	<body id="body">
		<div>
			<img src="{{ shopValue[0][0] }}"/>
			<p>
				<label>商品名称:</label>
				<span>{{ shopValue[0][1] }}</span>
			</p>
			<p>
				<label>描述:</label>
				<span>{{ shopValue[0][2] }}</span>
			</p>
			<p>
				<label>价格:</label>
				<span>{{ shopValue[0][3] }}</span>
			</p>
			<p>
				<button id="getResult">直接结算</button>
				<button id="goShopList">添加到购物车</button>
				<button id="returnIndex">返回到主页</button>
			</p>
		</div>
	</body>
	<script type="text/javascript" src="{{ url_for('static',filename='js/jquery-3.2.1.min.js')}}"></script>
	<script type="text/javascript">
		$(function(){
			result = document.getElementById("getResult");
			shoplist = document.getElementById("goShopList");
			index = document.getElementById("returnIndex");
			result.addEventListener("click",function(){
				//直接跳转到结算界面
				self.location = "/shop/result";
			});
			shoplist.addEventListener("click",function(){
				//跳转到购物车界面
				$.ajax({
					url: '/shop/shoplist',
					type: "GET",
					success: function(data){
						if(data == 'error'){
							alert("添加失败，请先登陆！")
							self.location = '/user/login';
						}
						else{
							alert("添加成功!");
							self.location = "/"+data;
						}
					}
				});
			});
			index.addEventListener("click",function(){
				// 这里也需要判断用户是否登录
				$.ajax({
					url: "/shop/index",
					type: "GET",
					success: function(data){
						if(data=="error"){
							self.location = "/";
						}
						else{
							self.location = "/"+data;
						}
					}
				});
			});
		}());
	</script>
	<script>
		var vbody = document.getElementById("body");
		{% if systemvalue.get('bg') == "01" %}
			vbody.style.background = "blue";
		{% elif systemvalue.get('bg') == "02" %}
			vbody.style.background = "yellow";
		{% else %}
			vbody.style.background = "red";
		{% endif %}
	</script>
	<script>
		var vbody = document.getElementById("body");
		{% if systemvalue.get('fontcolor') == "41" %}
			vbody.style.color = "green";
		{% elif systemvalue.get('fontcolor') == "42" %}
			vbody.style.color = "blue";
		{% else %}
			vbody.style.color = "yellow";
		{% endif %}
	</script>
	<script>
		var vbody = document.getElementById("body");
		{% if systemvalue.get('fontsize') == "31" %}
			vbody.style.fontSize = "24px";
		{% elif systemvalue.get('fontsize') == "32" %}
			vbody.style.fontSize = "36px";
		{% else %}
			vbody.style.fontSize = "12px";
		{% endif %}
	</script>
	<script>
		var vbody = document.getElementById("body");
		{% if systemvalue.get('transparency') == "21" %}
			vbody.style.opacity = 0.7;
		{% elif systemvalue.get('transparency') == "22" %}
			vbody.style.opacity = 1;
		{% else %}
			vbody.style.opacity = 0.3;
		{% endif %}
	</script>
</html>